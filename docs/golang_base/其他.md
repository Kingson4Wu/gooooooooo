+ 深入Go代码覆盖率使用、场景与原理:<https://mp.weixin.qq.com/s/D9gHNAyGdXNLloetr7bR3g>

总结
代码覆盖率是判断代码书写的质量，识别无效代码的重要工具。在go生态中，go1.2提供了测试代码覆盖率的cover工具。
* 静态代码
对于静态的代码，要识别代码没有被使用，可以使用golangci-lint工具
golangci-lint run --disable-all --enable unused
* 对于线下的单元测试
可以使用go test -cover工具
* 测试环境下的代码
对于测试环境下有请求或长时间运行程序的单元覆盖率，可以借助cover工具使用文中巧妙的方式来测试。如果测试环境不充分完备，没有办法测试出来。线上统计函数是否被调用有两种方式倾入性和非倾入性。
* 对于线上倾入性的方式
主要是在关键位置注入一行函数进行统计。可以是函数级别的，甚至可以借助go test -cover 在每一个逻辑分支注入了函数。
如果只是考虑函数级别的，可以考虑直接shel脚本注入函数，这样做时间成本最低。也可以考虑借助AST抽象语法树的方式，成本略高。
如果是逻辑分支级别的，可以考虑借鉴开源库https://github.com/qiniu/goc 的手法来生成打桩后的go文件。它是对go test -cover 代码的封装，借助AST抽象语法树，在特定位置插入一行。
* 对于线上非倾入性的方式
通过pprof，信号中断处理的手法，抽样获取堆栈信息。一些处理时间很短的函数，将很难被检测到。这种方式对于检测到经常使用的函数有用，但是不适合推断没有使用过的函数。
参考资料
官方文档：https://go.dev/blog/cover
合并profile：https://github.com/rakyll/pprof-merge
七牛云goc：https://github.com/qiniu/goc
利用 go/ast 语法树做代码生成: https://segmentfault.com/a/1190000039215176
Golang AST语法树使用教程及示例：https://juejin.cn/post/6844903982683389960
hook思路：https://github.com/brahma-adshonor/gohook


----

+ Go能实现AOP吗？:<https://mp.weixin.qq.com/s/ACtjNgUKx-GQf52ujUes_w>


